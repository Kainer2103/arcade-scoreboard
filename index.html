<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arcade Scoreboard</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>

body {
    margin: 0;
    background-image: url("https://images.unsplash.com/photo-1511512578047-dfb367046420");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    font-family: 'Press Start 2P', cursive;
    color: #fff;
    overflow-x: hidden;
    overflow: hidden;
    height:100%;
}


/* Title */
h1{
text-align:center;
color:#00f5ff;
text-shadow:0 0 10px #00f5ff; 
margin:10px 0;
}

/* Trophy */
.trophies{
text-align:center;
font-size:28px;
animation:float 3s infinite ease-in-out;
}

@keyframes float{
50%{transform:translateY(-10px);}
}

/* Header */
.header,.row{
display:grid;
grid-template-columns:60px 150px 100px;
gap:10px;
padding:10px;
font-size:10px;
}

.header{
color:#ff006e;
border-bottom:2px solid #ff006e;
}

/* Rows */
.row{
border:2px solid #b620e0;
margin:5px 0;
position:relative;
transition:.3s;
}

.row:hover{
transform:translateX(5px);
background:#b620e022;
}

/* ===== TOP 3 MEDAL STYLE ===== */

/* ü•á GOLD */
.rank-1{
  border:2px solid;
  border-image: linear-gradient(
    45deg,
    #fff6b7,
    #fdd835,
    #ffb300,
    #fdd835,
    #fff6b7
  ) 1;
  box-shadow:
    0 0 12px rgba(255,215,0,0.6),
    inset 0 0 10px rgba(255,255,255,0.15);
}

.rank-1 div:first-child{
  color:#ffd700;
  text-shadow:0 0 8px #ffd700;
}

/* ü•à SILBER */
.rank-2{
  border:2px solid;
  border-image: linear-gradient(
    45deg,
    #ffffff,
    #dcdcdc,
    #a8a8a8,
    #dcdcdc,
    #ffffff
  ) 1;
  box-shadow:
    0 0 10px rgba(200,200,200,0.5),
    inset 0 0 8px rgba(255,255,255,0.1);
}

.rank-2 div:first-child{
  color:#e0e0e0;
  text-shadow:0 0 6px #ffffff;
}

/* ü•â BRONZE */
.rank-3{
  border:2px solid;
  border-image: linear-gradient(
    45deg,
    #e6b17a,
    #c68642,
    #8c4a1c,
    #c68642,
    #e6b17a
  ) 1;
  box-shadow:
    0 0 10px rgba(205,127,50,0.6),
    inset 0 0 8px rgba(255,255,255,0.08);
}

.rank-3 div:first-child{
  color:#cd7f32;
  text-shadow:0 0 6px #cd7f32;
}

.score-bar{
position:absolute;
left:0;
bottom:0;
height:3px;
background:linear-gradient(90deg,#ff006e,#00f5ff);
}

.insert{
text-align:center;
margin-top:20px;
color:#ffff00;
animation:blink 1.5s infinite;
}

@keyframes blink{
50%{opacity:0;}
}

.loading{
text-align:center;
padding:30px;
color:#00f5ff;
}

.error{
text-align:center;
padding:30px;
color:#ff006e;
}

@media(max-width:600px){
.header,.row{
grid-template-columns:50px 100px 70px 70px;
font-size:8px;
}
}

/* ===== REALISTIC ARCADE CABINET ===== */

.arcade-scene{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.arcade-cabinet::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;

  background:
    linear-gradient(to bottom,
      rgba(255,255,255,0.04),
      transparent 20%),
    linear-gradient(to top,
      rgba(255,255,255,0.03),
      transparent 20%);

  mix-blend-mode:overlay;
}


.arcade-cabinet{
  width:520px;

  background:
    linear-gradient(145deg,#1e1e1e,#0a0a0a);

  border:4px solid #000;
  border-radius:12px;
  padding:20px;

  box-shadow:
    inset 0 0 40px rgba(255,255,255,0.03),   /* leichte Innenaufhellung */
    inset 0 0 120px rgba(0,0,0,0.8),         /* Tiefen-Vignette */
    0 50px 100px rgba(0,0,0,0.95);           /* Bodenschatten */

  position:relative;
  overflow:hidden;
}

.arcade-cabinet::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;

  background-image:
    repeating-linear-gradient(
      45deg,
      rgba(255,255,255,0.01) 0px,
      rgba(255,255,255,0.01) 2px,
      transparent 2px,
      transparent 4px
    );

  opacity:0.2;
}

.arcade-cabinet .marquee{
  position:relative;
}

.arcade-cabinet .marquee::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:6px;

  background:linear-gradient(
    to bottom,
    #ff006e,
    #ffcc00,
    #00f5ff
  );
}

.arcade-cabinet .marquee::after{
  content:"";
  position:absolute;
  right:0;
  top:0;
  bottom:0;
  width:6px;

  background:linear-gradient(
    to bottom,
    #ff006e,
    #ffcc00,
    #00f5ff
  );
}

/* Marquee */
.marquee{
  height:80px;
  background:#111;
  border-radius:6px;
  margin-bottom:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  letter-spacing:2px;
  color:#bbb;
  box-shadow:inset 0 -15px 25px rgba(0,0,0,0.8);
}

.screen-bezel{
  background:#0a0a0a;
  padding:25px;
  border-radius:8px;

  box-shadow:
    inset 0 0 60px rgba(0,0,0,0.95),
    inset 0 0 10px rgba(255,255,255,0.05),
    0 0 10px rgba(0,0,0,0.8);

  position:relative;
}

.screen-bezel::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;

  background:
    radial-gradient(circle at 30% 20%,
      rgba(255,255,255,0.03),
      transparent 40%);

  opacity:0.6;
}

/* Inner frame */
.screen-inner{
  background:#111;
  padding:15px;
  border-radius:6px;
  box-shadow:inset 0 0 25px #000;
}

/* Screen */
.screen-content{
  background:#000;
  border-radius:4px;
  padding:10px;
  box-shadow:inset 0 0 60px rgba(0,0,0,0.9);

  height: 420px;              /* feste Bildschirmh√∂he */
  overflow-y: auto;           /* internes Scrollen */
  overflow-x: hidden;
  position:relative;
}

.screen-content::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:repeating-linear-gradient(
    0deg,
    rgba(0,0,0,0.25) 1px,
    transparent 2px
  );
}

.screen-content::-webkit-scrollbar {
  width: 6px;
}

.screen-content::-webkit-scrollbar-track {
  background: transparent;
}

.screen-content::-webkit-scrollbar-thumb {
  background: rgba(0,245,255,0.3);
  border-radius: 3px;
}

/* Control Panel */
.control-panel{
  background:#111;
  border-radius:6px;
  padding:20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:inset 0 0 25px #000;
  transform:perspective(800px) rotateX(12deg);
  transform-origin:top;
  position:relative;
}

.control-panel::after{
  content:"";
  position:absolute;
  left:10%;
  right:10%;
  bottom:-20px;
  height:20px;
  background:radial-gradient(ellipse at center,
    rgba(0,0,0,0.7),
    transparent 70%);
  filter:blur(8px);
}

/* ===== BIG REALISTIC JOYSTICK ===== */
.joystick{
  position:relative;
  width:110px;
  height:110px;
  perspective:800px;
}

.base{
  position:absolute;
  bottom:0;
  left:15px;
  width:80px;
  height:20px;
  background:linear-gradient(#222,#000);
  border-radius:10px;
  box-shadow:
    inset 0 0 10px #000,
    0 6px 12px rgba(0,0,0,0.9);
}

.stick{
  position:absolute;
  bottom:20px;
  left:54px;
  width:12px;
  height:75px;
  background:linear-gradient(#666,#111);
  border-radius:6px;

  transform-origin: bottom center;
  transition: transform 0.15s ease;

  box-shadow:
    inset -2px -4px 6px rgba(0,0,0,0.6),
    0 6px 10px rgba(0,0,0,0.8);
}

.ball{
  position:absolute;
  top:-25px;
  left:-14px;
  width:40px;
  height:40px;

  background:radial-gradient(circle at 30% 30%,
    #ff3a3a,
    #a00000 70%);

  border-radius:50%;

  box-shadow:
    inset -4px -6px 10px rgba(0,0,0,0.6),
    0 8px 16px rgba(0,0,0,0.9);
}

/* Buttons */
.buttons{
  display:flex;
  gap:18px;
  transform:rotate(-5deg);
}

.btn{
  position:relative;
  width:38px;
  height:38px;
  border-radius:50%;
  background:radial-gradient(
    circle at 30% 30%,
    #ff3a3a 0%,
    #c40000 60%,
    #7a0000 100%
  );

  box-shadow:
    0 6px 0 #400000,                 /* Button Tiefe */
    0 8px 12px rgba(0,0,0,0.8),      /* Schatten auf Panel */
    inset -4px -6px 8px rgba(0,0,0,0.6),  /* Untere W√∂lbung */
    inset 3px 3px 6px rgba(255,255,255,0.15); /* Licht oben */

  transition:all 0.08s ease;
}

/* Glanzreflex */
.btn::before{
  content:"";
  position:absolute;
  top:6px;
  left:8px;
  width:18px;
  height:12px;
  border-radius:50%;
  background:rgba(255,255,255,0.25);
  filter:blur(2px);
}

/* gedr√ºckt Effekt */
.btn:active{
  transform:translateY(4px);
  box-shadow:
    0 2px 0 #400000,
    0 3px 6px rgba(0,0,0,0.8),
    inset -4px -6px 8px rgba(0,0,0,0.6),
    inset 3px 3px 6px rgba(255,255,255,0.15);
}

.button-ring{
  background:radial-gradient(circle at 40% 40%, #222, #000 70%);
  padding:8px;
  border-radius:50%;
  box-shadow:
    inset 0 0 10px #000,
    0 6px 12px rgba(0,0,0,0.9);
}

.frame{
  border:2px solid #222;
  background:#000;
  padding:20px;
  box-shadow:inset 0 0 40px #000;
}

</style>
</head>

<body>

  <audio id="bgMusic" src="The-Stench-Of-Danger.mp3" loop></audio>

<div class="arcade-scene">

  <div class="arcade-cabinet">

    <div class="marquee">
      ARCADE BOARD
    </div>

    <div class="screen-bezel">
      <div class="screen-inner">
        <div class="screen-content">
          
          <!-- DEIN BOARD BEGINNT HIER -->
          <div class="container">
            <div class="frame">
              <h1>HIGH SCORE</h1>
              <div class="trophies">üèÜ üëë üèÜ</div>
              <div id="board"></div>
              <div class="insert">‚ñ≤ INSERT COIN ‚ñ≤</div>
            </div>
          </div>
          <!-- DEIN BOARD ENDET HIER -->

        </div>
      </div>
    </div>

    <div class="control-panel">

  <div class="joystick">
  <div class="base"></div>
  <div class="stick">
    <div class="ball"></div>
  </div>
</div>


  <div class="buttons">
    <div class="button-ring"><div class="btn"></div></div>
    <div class="button-ring"><div class="btn"></div></div>
    <div class="button-ring"><div class="btn"></div></div>
    <div class="button-ring"><div class="btn"></div></div>
  </div>

</div>

<script>

/* =============================
   GOOGLE SHEET CSV LINK
============================= */

const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQzWlByVkCzcn8bGO9kPYH7eKkBJwDsPJjTqotjaWmOCopmy0rjA5b-RlVQ__pEBxDtHIpaUut19E5z/pub?output=csv";

const board = document.getElementById("board");
let lastTop = null;

/* Loading UI */
function showLoading(){
board.innerHTML='<div class="loading">LOADING...</div>';
}

/* Error UI */
function showError(){
board.innerHTML='<div class="error">FAILED TO LOAD</div>';
}

/* Parse CSV */
function parseCSV(text){

    const rows = text.trim().split("\n").slice(1);

    const data = rows.map(r=>{
        const c = r.split(",");
        return {
            date: c[0],
            score: Number(c[1])
        };
    });

    // sortieren nach Score
    data.sort((a,b)=>b.score-a.score);

    // Rang automatisch vergeben
    data.forEach((row,i)=>{
        row.rank = "#" + (i+1);
    });

    return data;
}

/* Confetti */
function confetti(){
for(let i=0;i<30;i++){
let d=document.createElement("div");
d.style.position="fixed";
d.style.width="6px";
d.style.height="6px";
d.style.background=["#ff006e","#00f5ff","#ffff00"][i%3];
d.style.left=Math.random()*100+"vw";
d.style.top="-10px";
d.style.transition="2s linear";
document.body.appendChild(d);
setTimeout(()=>{d.style.top="110vh";d.style.opacity=0;},10);
setTimeout(()=>d.remove(),2000);
}
}

/* Render */
function render(data){

data.sort((a,b)=>b.score-a.score);
const top=data;
const max=Math.max(...top.map(x=>x.score),1);

board.innerHTML=`
<div class="header">
<div>RANK</div>
<div>DATE</div>
<div>SCORE</div>
</div>`;

top.forEach((r,i)=>{
let pct=r.score/max*100;
board.innerHTML+=`
<div class="row rank-${i+1}">
<div>#${i+1}</div>
<div>${r.date}</div>
<div>${r.score}</div>
<div class="score-bar" style="width:${pct}%"></div>
</div>`;
});

const avg=Math.round(data.reduce((s,x)=>s+x.score,0)/data.length||0);

board.innerHTML+=`
<div style="margin-top:15px;text-align:center;font-size:9px;color:#00f5ff">
RUNS: ${data.length} | AVG: ${avg}
</div>`;

if(lastTop!==null && top[0].score>lastTop) confetti();
lastTop=top[0].score;

}

/* Fetch */
async function load(){
showLoading();
try{
const r=await fetch(CSV_URL+"&t="+Date.now());
const t=await r.text();
render(parseCSV(t));
}catch(e){
showError();
}
}

/* =============================
   JOYSTICK CONTROL
============================= */

const stick = document.querySelector(".stick");
const screen = document.querySelector(".screen-content");

document.addEventListener("keydown", (e)=>{

  if(e.key === "ArrowDown"){
    e.preventDefault();
    screen.scrollBy({top:80, behavior:"smooth"});
    stick.style.transform = "rotateX(25deg)";
  }

  if(e.key === "ArrowUp"){
    e.preventDefault();
    screen.scrollBy({top:-80, behavior:"smooth"});
    stick.style.transform = "rotateX(-25deg)";
  }

});

document.addEventListener("keyup", ()=>{
  stick.style.transform = "rotateX(0deg)";
});

/* =============================
   Music Player
============================= */
const music = document.getElementById("bgMusic");

document.addEventListener("click", () => {
  music.volume = 0;
  music.play();

  let fade = setInterval(() => {
    if (music.volume < 0.4) {
      music.volume += 0.02;
    } else {
      clearInterval(fade);
    }
  }, 100);
}, { once: true });

load();
setInterval(load, 30000);
</script>

</body>
</html>
